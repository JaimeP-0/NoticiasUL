---
// Componente: Tarjeta de noticia individual con comentarios
const { noticia } = Astro.props;
---

<article class="noticia bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-6 shadow-sm hover:shadow-md transition-shadow">
	<h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2">{noticia.titulo}</h3>
	<div class="flex gap-4 text-sm text-gray-600 dark:text-gray-400 mb-3">
		<span class="autor">Por: {noticia.autor}</span>
		<span class="fecha">{noticia.fecha || 'Fecha no disponible'}</span>
	</div>
	
	{noticia.imagen && (
		<img 
			src={noticia.imagen} 
			alt={noticia.titulo}
			class="max-w-xs max-h-48 object-cover rounded-lg mb-4 border border-gray-200 dark:border-gray-700"
			onerror="this.style.display='none'"
		/>
	)}
	
	<div class="contenido text-gray-700 dark:text-gray-300 whitespace-pre-line mb-4">
		{noticia.contenido}
	</div>

	<!-- Sección de comentarios -->
	<div class="comentarios-section mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
		<h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-3">Comentarios</h4>
		<div id={`comentarios-${noticia.id}`} class="comentarios-list space-y-3 mb-4">
			<!-- Los comentarios se cargarán aquí dinámicamente -->
		</div>
		
		<!-- Formulario de comentario -->
		<form class="comentario-form" data-noticia-id={noticia.id}>
			<div class="flex gap-2 mb-2">
				<input 
					type="text" 
					placeholder="Tu nombre" 
					class="flex-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
					required
				/>
			</div>
			<textarea 
				placeholder="Escribe un comentario..." 
				rows="2"
				class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
				required
			></textarea>
			<button 
				type="submit"
				class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors"
			>
				Comentar
			</button>
		</form>
	</div>
</article>

